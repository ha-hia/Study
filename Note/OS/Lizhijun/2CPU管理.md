## 进程与线程
### CPU管理的直观想法
* 操作系统为了管理CPU就得让CPU工作起来，操作系统开始执行程序。  
* 但当操作系统只执行一个程序，遇到费时的IO指令或者阻塞时，CPU的利用率将很低也就起不到管理好CPU的作用。 
* 为了提高CPU利用率，就应该让CPU时刻处于工作状态，CPU应该交替执行多个程序，并行。
* 并行执行时，实质为寄存器PC在程序间来回切换。运行的程序存在于内存，静态的程序存在于磁盘。
* 为了保存切出去时刻当前运行程序的运行信息，引入**PCB (Process Control Block 用来记录进程信息的数据结构)。** 
* 为了区分运行的程序和静态的程序，引入进程。

**进程：** 运行着的程序。
**结论：** 操作系统为了管理好CPU，就应该引入多进程。

### 多进程图像
**定义：** 启动的程序就是进程，多进程就是操作系统需要将这些多个进程记录好、并按合理的次序推进（分配资源、进行调度）

对于上层用户来说，是创建了多少个进程；对于下层的操作系统来说，是创建对应的PCB对进程进行合理的推进，多进程图像从启动开始到关机结束。

#### 多进程如何组织？
* 通过PCB来组织
* 操作系统利用多个进程的PCB以及状态形成不同的队列(执行、就绪队列、等待队列)将进程区分开来并推进。

```mermaid 
graph LR;
    new((新建状态));
    ready((就绪态));
    run((运行态));
    e((终止态));
    block((阻塞态));

    new-->ready;
    ready--OS调度-->run;
    run-->ready;
    run-->e;
    run--事件-等待资源-->block;
    block--事件-获取到资源-->ready;  
```

#### 多进程如何切换？
**队列操作** + **调度** + **切换**
调度选择下一个进程，得到下个进程PCB,将进程中PCB的信息与CPU的信息进行交换

#### 多进程如何影响？
**原因：** 多进程都放内存中
**映射表**  对多进程地址空间的分离(内存管理)

#### 多进程如何合作？
**进程同步（合理的推进顺序）**